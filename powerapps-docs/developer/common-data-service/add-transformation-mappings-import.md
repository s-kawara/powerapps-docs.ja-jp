---
title: インポート用の変換マッピングの追加 (Common Data Service) | Microsoft Docs
description: 変換マッピングでは、インポート前にソース データをオプションで変更できます。
ms.custom: ''
ms.date: 10/31/2018
ms.reviewer: ''
ms.service: powerapps
ms.topic: article
author: mayadumesh
ms.author: jdaly
manager: ryjones
search.audienceType:
  - developer
search.app:
  - PowerApps
  - D365CE
---
# <a name="add-transformation-mappings-for-import"></a>インポート用の変換マッピングの追加

インポート前にデータを変更するには、変換マッピングを使用します。 たとえば、ソース ファイルに含まれている氏名を名と姓に分割し、エンティティのターゲット属性に一致させる場合などです。  
  
 変換マッピングを実装するには、変換マッピング (`TransformationMapping`) エンティティおよび変換パラメーター マッピング (`TransformationParameterMapping`) エンティティを使用します。  
  
 変換されたデータと Common Data Service のエンティティ属性の種類には互換性がある必要があります。  
  
 変換の種類は `TransformationMapping.TransformationTypeName` プロパティで記述します。 このプロパティの有効な値を次の表に示します。  
  
|フィールド|値|  
|-----------|-----------|  
|AddToCurrentDate|Microsoft.Crm.Transformations.AddToCurrentDate|  
|AddToDate|Microsoft.Crm.Transformations.AddToDate|  
|AdvancedAddToCurrentDate|Microsoft.Crm.Transformations.AdvancedAddToCurrentDate|  
|AssignValue|Microsoft.Crm.Transformations.AssignValue|  
|連結|Microsoft.Crm.Transformations.Concatenate|  
|置換|Microsoft.Crm.Transformations.Replace|  
|並べて表示|Microsoft.Crm.Transformations.Split|  
|サブストリング|Microsoft.Crm.Transformations.Substring|  
  
 次のセクションでは、実行可能な変換について説明します。  
  
<a name="BKMK_Concatenation"></a>   
## <a name="concatenation"></a>連結  
 文字列を連結し、区切り文字で区切ります。  
  
|入力パラメーター|説明|  
|----------------------|-----------------|  
|接頭辞|連結された文字列で接頭辞として使用される文字列。|  
|敬称|連結された文字列で接尾辞として使用される文字列。|  
|区切り文字|連結された文字列内のサブストリングを区切る 1 文字または文字の組み合わせ。 接頭辞とサブストリング間または接尾辞とサブストリング間に区切り文字は使用しません。 バックスペース文字 (\b)、改行文字 (\n)、およびリターン文字 (\r) は、区切り文字として使用しないでください。|  
|\<変数>|サブストリングを含む可変長の配列。|  
  
|出力パラメーター|説明|  
|-----------------------|-----------------|  
|文字列|連結された文字列。|  
  
<a name="BKMK_Split"></a>   
## <a name="split"></a>並べて表示  
 区切り文字を含む文字列を複数のサブストリングに分割します。 最大 10 個のサブストリングに分割できます。  
  
|入力パラメーター|説明|  
|----------------------|-----------------|  
|入力文字列|区切り文字で区切られた 1 つ以上のサブストリングを含む文字列。|  
|区切り文字|文字列内のサブストリングを区切る 1 文字または文字の組み合わせ。 バックスペース文字 (\b)、改行文字 (\n)、リターン文字 (\r)、または空の文字列は、区切り文字として使用しないでください。|  
  
|出力パラメーター|説明|  
|-----------------------|-----------------|  
|変数|1 から最大 10 までのサブストリング。|  
  
 たとえば、入力文字列に 11 個のサブストリングが含まれる場合、次の例で示すように、出力には 10 個のサブストリングが含まれます。  
  
 入力文字列: a;b;c;d;e;f;g;h;i;j;k  
  
 出力:   
  
 a  
  
 b  
  
 c  
  
 d  
  
 e  
  
 f  
  
 g  
  
 h  
  
 i  
  
 j;k  
  
<a name="BKMK_Substring"></a>   
## <a name="substring"></a>サブストリング  
 文字列内の指定された箇所で開始する、指定された長さのサブストリングを返します。  
  
|入力パラメーター|説明|  
|----------------------|-----------------|  
|入力文字列|サブストリングを含む文字列。|  
|開始インデックス|サブストリングの開始位置。|  
|長さ|サブストリングの長さ。 長さが **null** の場合は、開始インデックスから完全な文字列を返します。|  
  
|出力パラメーター|説明|  
|-----------------------|-----------------|  
|サブストリング|返されたサブストリング。|  
  
<a name="BKMK_Replace"></a>   
## <a name="replace"></a>置換  
 指定された文字列のすべての出現を、指定された別の文字列に置き換えます。  
  
|入力パラメーター|説明|  
|----------------------|-----------------|  
|入力文字列|検索文字列を含む文字列。|  
|検索文字列|検索文字列。 バックスペース文字 (\b)、改行文字 (\n)、およびリターン文字 (\r) は、検索文字列として使用しないでください。|  
|置換文字列|置換文字列。 空の文字列を使用して検索文字列を削除します。 バックスペース文字 (\b)、改行文字 (\n)、およびリターン文字 (\r) は、置換文字列として使用しないでください。|  
  
|出力パラメーター|説明|  
|-----------------------|-----------------|  
|値|置換値 (割り当てられた値と同じ)。|  
  
<a name="BKMK_AssignValue"></a>   
## <a name="assign-value"></a>値の割り当て  
 すべての値を、指定された値に置き換えます。  
  
|入力パラメーター|説明|  
|----------------------|-----------------|  
|値|割り当てる値。|  
  
|出力パラメーター|説明|  
|-----------------------|-----------------|  
|値|置換値 (割り当てられた値と同じ)。|  
  
> [!NOTE]
>  日付の変換は、正しく書式設定された日付にのみ使用できます。 日付の書式を設定する方法については、Common Data Service のヘルプを参照してください。  
  
<a name="BKMK_AddToDate"></a>   
## <a name="add-to-date"></a>日付に追加  
 指定された日数、月数、および年数を日付に追加します。  
  
|入力パラメーター|説明|  
|----------------------|-----------------|  
|日付|変更する日付文字列。|  
|年のオフセット|入力日付の年コンポーネントに追加される正または負の値。|  
|月のオフセット|入力日付の月コンポーネントに追加される正または負の値。|  
|日のオフセット|入力日付の日コンポーネントに追加される正または負の値。|  
  
|出力パラメーター|説明|  
|-----------------------|-----------------|  
|新しい日付|日、月、および年を (この順序で) 含む新しい日付の文字列。|  
  
<a name="BKMK_AdjustCurrentDate"></a>   
## <a name="adjust-current-date-and-set-time"></a>現在の日付の調整と時間の設定  
 指定された日数、月数、年数を現在の日付に追加して、指定された時間を設定します。 オフセットには、整数値のみを使用できます。  
  
|入力パラメーター|説明|  
|----------------------|-----------------|  
|年のオフセット|現在の日付の年コンポーネントに追加される正または負の値。|  
|月のオフセット|現在の日付の月コンポーネントに追加される正または負の値。|  
|日のオフセット|現在の日付の日コンポーネントに追加される正または負の値。|  
|時間|現在の日付の時間コンポーネントの設定に使用される値。|  
|分|現在の日付の分コンポーネントの設定に使用される値。|  
|秒間|現在の日付の秒コンポーネントの設定に使用される値。|  
|曜日|月曜日、火曜日、水曜日、木曜日、金曜日、土曜日、日曜日のいずれかの曜日。 曜日は整数で表されます。月曜日は 10 進数の 1 です。 曜日の値は、`DayOfWeek` 列挙体に含まれています。 この列挙体の詳細については、MSDN のトピック「[DayOfWeekEnumeration](https://msdn.microsoft.com/library/system.dayofweek.aspx)」を参照してください。 <br />計算された現在の日付が指定された曜日に当てはまらない場合は、指定された曜日に当てはまる最も近い過去の日付に調整されます。 現在の日付は、常に、過去の日付に調整されます。 <br />たとえば、水曜日を曜日として指定し、新しく計算された日付が 3 月 9 日の火曜日に当たる場合、日付は 3 月 3 日の水曜日に調整されます。|  
  
|出力パラメーター|説明|  
|-----------------------|-----------------|  
|新しい日付|日、月、および年を (この順序で) 含む新しい日付の文字列。|  
  
<a name="BKMK_AdvancedAdd"></a>   
## <a name="advanced-add-to-current-date"></a>現在の日付への詳細な追加  
 指定された日数、月数、および年数を現在の日付に追加します。 オフセットを現在の日付に対して相対値にするか、絶対値にするかを指定できます。 オフセットには、整数値のみを使用できます。  
  
 たとえば、月のオフセットに 3 の絶対値を使用すると、新しく計算される月は 3 月になります。 現在の日付の月のオフセットに相対値 3 を設定し、現在の月が 4 月である場合、新しく計算される月は 7 月になります。  
  
|入力パラメーター|説明|  
|----------------------|-----------------|  
|年のオフセット|現在の日付の年コンポーネントまたは絶対年に追加される正または負の値|  
|年のオフセットのモード|オフセットを現在の日付に対して相対的な値にするか、絶対値にするかを、`TransformationParameterMapping.Data` 属性を使用して指定します。 事前バインド型を使用する場合は、`TransformationOffsetMode` 列挙体を使用して、相対オフセットか絶対オフセットを指定できます。 DataTypeCode 値の一覧については、エンティティの候補リスト値を参照してください。 組織のエンティティ メタデータを表示するには、メタデータ ブラウザー ソリューションをインストールしてください。メタデータ ブラウザー ソリューションについては、「[組織のメタデータの参照](/dynamics365/customer-engagement/developer/browse-your-metadata)」を参照してください。 「[エンティティ参照](/dynamics365/customer-engagement/developer/about-entity-reference)」でエンティティの参照ドキュメントを参照することもできます。  
|月のオフセット|現在の日付の月コンポーネントまたは絶対月に追加される正または負の値。|  
|月のオフセットのモード|オフセットを現在の日付に対して相対的な値にするか、絶対値にするかを、`TransformationParameterMapping.Data` 属性を使用して指定します。 事前バインド型を使用する場合は、`TransformationOffsetMode` 列挙体を使用して、相対オフセットか絶対オフセットを指定できます。 DataTypeCode 値の一覧については、エンティティの候補リスト値を参照してください。|  
|日のオフセット|現在の日付の日コンポーネントまたは絶対日に追加される正または負の値。|  
|日のオフセットのモード|オフセットを現在の日付に対して相対的な値にするか、絶対値にするかを、`TransformationParameterMapping.Data` 属性を使用して指定します。 事前バインド型を使用する場合は、`TransformationOffsetMode` 列挙体を使用して、相対オフセットか絶対オフセットを指定できます。 DataTypeCode 値の一覧については、エンティティの候補リスト値を参照してください。|  
|時間|現在の日付の時間コンポーネントを設定する値。|  
|分|現在の日付の分コンポーネントを設定する値。|  
|秒間|現在の日付の秒コンポーネントを設定する値。|  
  
|出力パラメーター|説明|  
|-----------------------|-----------------|  
|新しい日付|日、月、および年を (この順序で) 含む新しい日付の文字列。 最初に相対的なコンポーネントが追加され、次に絶対値を使用して日付が作成されます。|  

### <a name="see-also"></a>関連項目

[データのインポート](import-data.md)<br />
[ソース ファイルのインポートを準備する](prepare-source-files-import.md)<br />
[インポート用データ マップの作成](create-data-maps-for-import.md)<br />
[データ インポートの構成](configure-data-import.md)<br />
[データ インポートの実行](run-data-import.md)<br />
[データ インポート エンティティ](data-import-entities.md)<br />
[サンプル: データ マップのエクスポートおよびインポート](org-service/samples/export-import-data-map.md)<br />
[サンプル: 複雑なデータ マップを使用してデータをインポートする](org-service/samples/import-data-complex-data-map.md)<br />
---
title: ユーザー定義エンティティの作成 | Microsoft Docs
description: PowerApps でユーザー定義エンティティの作成方法について説明します。
author: Mattp123
ms.service: powerapps
ms.component: cds
ms.topic: quickstart
ms.date: 05/01/2018
ms.author: matp
search.audienceType:
  - maker
search.app:
  - PowerApps
  - D365CE
---

# <a name="create-a-custom-entity"></a>ユーザー定義エンティティの作成
PowerApps では、*エンティティ*は、レコードの形式で追跡する情報を定義します。通常は会社名、場所、製品、電子メール、電話などのプロパティが含まれます。 次に、エンティティを参照するアプリを開発して、そのデータを表示できます。 PowerApps には、組織内の一般的なシナリオをカバーする標準エンティティ (予定の追跡など) が提供されていますが、組織に固有のデータを格納するユーザー定義エンティティを作成する必要がある場合があります。

このトピックでは、会社が販売する製品の評価やコメントを表示するアプリの作成に使用できる、製品レビューと呼ばれるユーザー定義エンティティを作成する方法について説明します。

## <a name="prerequisites"></a>前提条件
この手順を実行するには、 Common Data Service内にシステム管理者またはシステムカスタマイズ者のいずれかのセキュリティ役割が必要です。

## <a name="sign-in-to-powerapps"></a>PowerApps へのサインイン
[https://web.powerapps.com](https://web.powerapps.com/?utm_source=padocs&utm_medium=linkinadoc&utm_campaign=referralsfromdoc) で PowerApps にサインインします。

## <a name="create-an-entity"></a>エンティティの作成
1. ナビゲーション ウィンドウで、**データ**をクリックまたはタップして展開し、**エンティティ**をクリックまたはタップします。

    ![エンティティおよび詳細の一覧](./media/data-platform-cds-create-entity/entitylist.png "エンティティ リスト")

2. コマンド バーで、**新しいエンティティ**をクリックまたはタップします。

    エンティティを作成する前に、使用可能な標準エンティティの説明を [エンティティ参照](../../developer/common-data-service/reference/about-entity-reference.md) で確認します。 これらのエンティティは一般的なシナリオをカバーします。 これらのエンティティのいずれかがそのままの状態または小規模な変更後、要件を満たす場合、そのエンティティから始めることで時間を節約できます。 

3. **新規エンティティ** パネルで、次の操作を行います。

    a. **表示名称** ボックス にて、 **Product Review**を入力します。

    表示名称を入力すると、以下ののボックスに自動的に入力がされます。

    * **表示名の複数形** 表示名称に値を入力すると、このボックスに自動的に値が入力されます。必要に応じて変更することも可能です。 複数の表示名称は Common Data Service WebAPI のエンティティの名称であり、PowerApps または Flow からこのエンティティーとやり取りが行われる際に使用されます。
    * **名称** 表示名称に値を入力すると、このボックスに自動的に値が入力されます。 接頭辞は、環境が作成されたときにセットアップされました。作成したエンティティが、他のエンティティ名と競合せずに他の環境にエクスポートおよびインポートできることが確証されます。 Common Data Service 既定のソリューションのパブリッシャにて接頭辞を更新することで、この接頭辞を更新することができます。 既存のアプリの破損を防止するため、エンティティを保存した後で名前は変更できません。

       > [!NOTE]
       > [Dynamics 365 for Customer Service の埋め込み型ナレッジ検索](/dynamics365/customer-engagement/customer-service/set-up-knowledge-management-embedded-knowledge-search)にてエンティティ名称を使用するには、パブリッシャの接頭辞を含むエンティティ名の最大長は24文字以内に収める必要があります。

    b. **表示名称** ボックスの **プライマリ フィールド** セクションにて、 **名称** を **Product Review**に置き換えます。 

    既定では、すべてのエンティティには **プライマリ フィールド**が含まれており、これは他のエンティティとの関係を確立する際の検索処理に使用されます。 通常プライマリフィールドには、エンティティに格納されているデータの名称または主要な説明が格納されています。 エンティティを最初に保存する前に、プライマリフィールドの名称と表示名称を変更することが可能です。

    また、プライマリフィールドにも固有の **名称** ボックスがあり、上記のエンティティ名称と同様に機能します。 プライマリフィールドの名称は表示名称が入力された際に、エンティティを同じ接頭辞を使用して自動入力され、エンティティの作成が完了後には変更ができません。

    c. **その他の設定** セクションを開き、 **説明** のアコーディオンメニューを広げます。 必要に応じてエンティティの説明を入力することができます(他のユーザーがこのエンティティを使用する際に分かりやすくなります). 
    
    d. 作業が完了したら、 **作成** をクリックします。
     
    ![新規エンティティ](./media/data-platform-cds-create-entity/newentitypanel.png "新規エンティティパネル")

4. エンティティの詳細ページでは、エンティティがバックグラウンドでプロビジョニングされていることが確認できます。 プロビジョニングが完了すると、エンティティが保存されご利用のアプリケーションにて利用可能となります。 プロビジョニングの途中であってもフィールド、関係、キーはエンティティに追加することが可能ですが、ビュー、フォーム、チャート、ダッシュボード、ビジネス ルールはプロビジョニングが完了するまで追加ができません。

    ![エンティティの詳細](./media/data-platform-cds-create-entity/newentitydetails.png "新しいエンティティの詳細")

5. **フィールド** タブの配下で、前の手順で名前を付けた **プライマリ フィールド** を確認します。 **プライマリ フィールド** を開くことで、 **プライマリ フィールド** パネルを開き、必要に応じてフィールドへのカスタマイズを行うことができます。 **名称** は、エンティティが保存された後は変更ができなくなります。

5. エンティティにフィールドを追加するには、以下を行います。
 
    a. コマンド バーで、**フィールド プロパティ**ウィンドウを開くために**フィールドの追加**をクリックまたはタップします。

    b. **表示名**ボックスで、**[Review Date] レビュー日**を入力します。

    c. **データの種類**ドロップダウン リストから **日付のみ**を選択します。

    d. **必須**チェック ボックスをクリックまたはタップします。
    
    e. **完了**をクリックまたはタップします。
     
    詳細については、「[エンティティでのフィールドの管理](data-platform-manage-fields.md)」を参照してください。

    > [!div class="mx-imgBorder"] 
    > ![新しいフィールド](./media/data-platform-cds-create-entity/newfieldpanel-2.png "新しいフィールド パネル")

6. 次の構成を持つ 3 つのフィールドをさらに追加するために前の手順を実行します。
    * **表示名** = [Product Rating] 製品評価、**データの種類** = 整数。**必須**チェック ボックスをクリックまたはタップします。
    * **表示名** = [Reviewer Name] レビュー担当者名、**データの種類** = テキスト
    * **表示名** = [Reviewer Comment] レビュー担当者コメント、**データの種類** = テキスト

    完了すると、エンティティの詳細のページにフィールドが 5 つリストされます。

    ![フィールド一覧](./media/data-platform-cds-create-entity/addedfields.png "フィールドの一覧")

    すべてのエンティティが読み取り専用システム フィールドであることに注意してください。 既定では、システム フィールドは、エンティティにあってもフィールドの一覧に表示されません。 すべてのフィールドを表示するには、**既定**から**すべて**にコマンド バーのフィルターを変更します。 エンティティに関連するメタデータの詳細については、「[エンティティ メタデータ](../../developer/common-data-service/entity-metadata.md)」を参照してください。

7. **エンティティの保存** をクリックしてエンティティに行った変更を保存します。

    製品レビュー エンティティは、データベース内のエンティティの一覧に表示されます。 表示されない場合、**既定**から**ユーザー定義**にコマンド バーのフィルターを変更します。

    > [!div class="mx-imgBorder"] 
    > ![フィルター](./media/data-platform-cds-create-entity/filter.png "フィールター選択")

## <a name="next-steps"></a>次のステップ
このトピックでは、特定の会社が販売する各製品の評価やコメントを表示するアプリの作成に使用できる、製品レビューと呼ばれるユーザー定義エンティティを作成する方法について説明しました。 次に、各製品と受け取ったレビューおよびコメントを関連付けることができるように、エンティティ間の関連付けを定義する方法について説明します (この場合は、標準製品エンティティとカスタム製品レビュー エンティティの間)。

> [!div class="nextstepaction"]
> [関連付けの作成](data-platform-entity-lookup.md)

## <a name="privacy-notice"></a>プライバシーに関する声明
Microsoft PowerApps の Common Data モデルを使用することで、Microsoft はカスタム エンティティとフィールド名称を収集し、診断システムに保管します。 この情報を使って、お客様の共通データ モデルを改善します。 アプリケーション作成者が作成するエンティティ名称とフィールド名称は、 Microsoft PowerApps コミュニティに通底するシナリオの理解に役立ち、組織に関連するスキーマなど、サービスの標準的なエンティティ カバレッジのギャップを確認する際に役立てられます。 これらのエンティティに関連付けられたデータベース テーブル内のデータは、Microsoft によりアクセスまたは使用されず、データベースがプロビジョニングされた地域の外部にレプリケーションされません。 しかし、カスタム エンティティおよびフィールド名は、地域間でレプリケーションされ、データ保持ポリシーに基づいて削除される可能性がある点に注意してください。 マイクロソフトは、[セキュリティ センター](https://www.microsoft.com/trustcenter/Privacy/default.aspx) で詳しく説明されているとおりにプライバシー保護に努めています。

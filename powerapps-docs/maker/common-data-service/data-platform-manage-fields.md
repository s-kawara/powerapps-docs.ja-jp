---
title: エンティティのカスタム フィールドの管理 | Microsoft Docs
description: Common Data Service におけるエンティティのカスタム フィールドの作成、読み取り、更新、および削除を行う方法のチュートリアル。
author: lancedMicrosoft
manager: kfile
ms.service: powerapps
ms.component: cds
ms.topic: conceptual
ms.date: 03/21/2018
ms.author: lanced
search.audienceType:
  - maker
search.app:
  - PowerApps
  - D365CE
---

# <a name="manage-custom-fields-in-an-entity"></a>エンティティのカスタム フィールドの管理
すべてのエンティティの 1 つ以上のカスタム フィールドの作成および更新を行うことができます。 カスタム フィールドを作成する場合、フィールド名、表示名、および含まれるデータの種類などのプロパティ セットを指定します。 詳細については、[エンティティ属性のメタデータ](../../developer/common-data-service/entity-attribute-metadata.md) を参照してください。

> [!NOTE]
> すべてのエンティティには、レコードが最後に更新された時間、更新した人を示すフィールドなどのシステム フィールドがあります。 さらに、標準エンティティには標準 (既定) フィールドがあります。 システム フィールドまたは標準フィールドの変更または削除はできません。 カスタム フィールドを作成する場合、これらの組み込みフィールド上で機能を提供する必要があります。

## <a name="create-a-field"></a>フィールドを作成する
1. [powerapps.com](https://web.powerapps.com/?utm_source=padocs&utm_medium=linkinadoc&utm_campaign=referralsfromdoc) で**データ**セクションを展開し、左側のナビゲーション ウィンドウで**エンティティ**をクリックまたはタップします。

    ![エンティティの詳細](./media/data-platform-cds-create-entity/entitylist.png "エンティティ リスト")

2. 既存のエンティティ、または [エンティティの新規作成](data-platform-create-entity.md) をクリックまたはタップします

3. **フィールドの追加**をクリックして、新しいフィールドをエンティティに追加します。

4. 新しいフィールド パネルで、フィールドの**表示名**を入力すると、**名前**が自動的に設定され、フィールドに対する一意の名前として使用されます。 **表示名**は、ユーザーにこのフィールドを表示するときに使用され、**名前**は式や数式でアプリを構築する時に使用されます。

    > [!NOTE]
    > **表示名**フィールドは、いつでも更新してアプリ内で異なる方法で表示させることができます。**名前**フィールドは、既存のアプリを破損させる可能性があるため、エンティティが保存された後は変更できません。

    > [!div class="mx-imgBorder"] 
    > ![新しいフィールド](./media/data-platform-cds-create-entity/newfieldpanel.png "新しいフィールド パネル")

5. フィールドの**データの種類**を選択することにより、情報の保存方法およびアプリ内での表示方法を制御します。 たとえば、テキストが保存される方法は、10 進数または URL とは異なります。 使用可能なデータの種類の詳細については、[エンティティ属性のメタデータ](../../developer/common-data-service/entity-attribute-metadata.md) を参照してください。

    要求された場合、指定したデータの種類に対する追加の情報を指定します。 データの種類に応じて、異なるフィールドが表示されます。 種類のオプション セットまたは複数選択オプション セットのフィールドを作成する場合、フィールドの作成中に**新しいオプション セット**を選択し、新しいオプション セットを作成することができます。 詳細については、[オプション セットの作成](custom-picklists.md) を参照してください。

    > [!div class="mx-imgBorder"] 
    > ![新しいフィールド](./media/data-platform-cds-create-entity/newfieldpanel-2.png "新しいフィールド パネル")


7. **必須**で、アプリ内でこのフィールドを必須にすることを推奨する場合、チェックボックスをオンにします。 これは Common Data Service へのすべての接続を通じた強制実施は提供しません。 フィールドが設定されていることを確認する必要がある場合、[業務ルール](data-platform-create-business-rule.md) を作成します。

8. **検索可能**で、このフィールドをビュー、グラフ、ダッシュボードおよび高度な検索で使用可能にする必要がある場合、チェックボックスをオンにします。 通常、このチェックボックスをオンにする必要があります。

9. **完了**をクリックまたはタップしてフィールド パネルを閉じ、エンティティに戻ります。 追加フィールドごとに手順 3 ～ 9 を繰り返します。
   
    > [!IMPORTANT]
    > エンティティへの変更を保存するまで、フィールドの保存および作成は行われません。

10. **エンティティの保存**をクリックまたはタップして変更を確定し、Common Data Service に保存します。

    操作が正常に完了すると通知を受け取ります。 操作が失敗した場合、発生した問題および修正する方法をエラー メッセージが示します。

## <a name="create-a-calculated-or-roll-up-field"></a>計算またはロールアップ フィールドの作成
計算フィールドを使用して、ビジネス プロセスで使用する手動による計算を自動化することができます。 たとえば、営業担当者は営業案件の売上高の期待値を知ることが必要な場合があります。この期待値は、営業案件からの売上見込みに確率を乗じて得られた値に基づきます。 または、受注が $500 より大きい場合、値引きを自動的に適用することを望みます。 計算フィールドには、単純な数学演算や greater than または if-else などの条件付き演算から得られた値を含めることができます。 計算フィールドは次のデータの種類を使用して作成されます。

* 1 行テキスト
* [オプション セット]
* 2 つのオプション
* 整数
* 10 進数
* [通貨]
* 日付と時間

サポートされる式の種類および例の詳細については、[計算フィールドの定義](/dynamics365/customer-engagement/customize/define-calculated-fields) を参照してください。

## <a name="update-or-delete-a-field"></a>フィールドの更新または削除
1. [powerapps.com](https://web.powerapps.com/?utm_source=padocs&utm_medium=linkinadoc&utm_campaign=referralsfromdoc) で**データ** セクションを展開して左側のナビゲーション ウィンドウの**エンティティ**をクリックまたはタップし、それからエンティティをクリックまたはタップします。
2. 選択したエンティティのフィールド一覧でフィールドをクリックまたはタップし、以下の手順の 1 つに従います。
   
   * フィールドの 1 つ以上のプロパティを変更します。
   * フィールドの右端の省略記号 (...) をクリックまたはタップししてフィールドを削除し、それから**削除**をクリックまたはタップします。

3. **エンティティの保存**をクリックまたはタップして、変更を送信します。
   
    > [!IMPORTANT]
    > ブラウザーで別のページを開くか、ブラウザーを終了する前に保存しなかった場合、変更内容は失われます。

    操作が正常に完了すると通知を受け取ります。 操作が失敗した場合、発生した問題および修正する方法をエラー メッセージが示します。

## <a name="best-practices-and-restrictions"></a>ベスト プラクティスおよび制限
フィールドの作成および変更を行う場合、次の点に注意してください。

* システム フィールドまたはその値の変更または削除はできません。
* 標準エンティティにおいて、標準 (既定) フィールドの変更または削除、データを必要とするフィールドの追加、またはエンティティに依存するアプリに損失を与える可能性のある変更を行うことはできません。
* ユーザー定義エンティティにおいて、変更によりエンティティに依存するアプリすべてが破損されないことを確認する必要があります。
* 各カスタム フィールドに、エンティティ内で一意の名前を付ける必要がありますが、作成後はフィールドの名前を変更できません。

## <a name="next-steps"></a>次のステップ
* [エンティティ間での関連付けの定義](data-platform-entity-lookup.md)
* [業務ルールの作成](data-platform-create-business-rule.md)
* [エンティティを使用するアプリの作成](../canvas-apps/data-platform-create-app.md)
* [Common Data Service データベースを使用してアプリを最初から作成](../canvas-apps/data-platform-create-app-scratch.md)

## <a name="privacy-notice"></a>プライバシーに関する声明
Microsoft PowerApps 共通データ モデルでは、ユーザー定義エンティティおよびフィールド名を収集し、診断システムに保存します。  この情報を使って、お客様の共通データ モデルを改善します。 作成者が作成するエンティティ名およびフィールド名は、Microsoft PowerApps コミュニティに共通するシナリオを理解し、組織に関連するスキーマなど、サービスの標準エンティティの範囲でのすきまを確認するのに役立ちます。 これらのエンティティに関連付けられたデータベース テーブル内のデータは、Microsoft によりアクセスまたは使用されず、データベースがプロビジョニングされた地域の外部にレプリケーションされません。 注、しかし、カスタム エンティティおよびフィールド名は、地域間でレプリケーションされ、データ保持ポリシーに基づいて削除される可能性がある点に注意してください。 マイクロソフトは、[セキュリティ センター](https://www.microsoft.com/trustcenter/Privacy/default.aspx) で詳しく説明されているとおりにプライバシー保護に努めています。

